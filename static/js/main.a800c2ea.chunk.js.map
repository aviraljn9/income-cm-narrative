{"version":3,"sources":["logo.svg","components/Chart.js","components/Plot.js","components/BarChart.js","components/Controller.js","App.js","reportWebVitals.js","index.js"],"names":["Chart","props","svgRef","React","createRef","state","setyear","bind","tick","datafiltered","this","median_childmortality","filter","x","year","datafiltered2","median_income","scalex","d3","domain","range","scaley","scaley_2","html","append","attr","selectAll","data","enter","d","i","median_val","call","tickFormat","tickValues","a","console","log","process","incomedata","cm_data","index","year_income","map","cm_country","find","y","country","undefined","isNaN","child_mortality","reducer","accumulator","currentValue","parseFloat","sum_cm","reduce","push","length","sum_income","income","updatechart","timerID","setInterval","clearInterval","setState","prevState","prevProps","event","target","value","for","type","min","max","step","id","onInput","name","width","height","ref","Component","Plot","y_domain","radius","BarChart","num_countries","sort","b","num_countries_per_group","Math","floor","groups","group_index","num_groups","cm_group_averages","curr_group","count_group","sum_cm_group","sum_income_group","Array","keys","paddingInner","paddingOuter","cm_avg","bandwidth","Controller","setscene","scene","onClick","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a800c2ea.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, { Component } from 'react'\nimport * as d3 from \"d3\";\n\nexport class Chart extends Component {\n    constructor(props) {\n        super(props);\n        this.svgRef = React.createRef();\n\n        this.state = {\n            'year': 1800\n        }\n        this.setyear =this.setyear.bind(this);\n        this.tick =this.tick.bind(this);\n    }    \n\n    updatechart()\n    {\n        let y_domain = 500;\n        let radius = 1.5;\n        // if (this.state.year == 2021 && this.timerID === null) {\n        //     y_domain = 150;\n        //     radius = 3;\n        // }\n\n        let datafiltered = this.median_childmortality.filter(\n            x => x.year <= this.state.year\n        )\n\n        let datafiltered2 = this.median_income.filter(\n            x => x.year <= this.state.year\n        )\n\n        const scalex = d3.scaleLinear()\n        .domain([1800,2040])\n        .range([0,700])\n        const scaley = d3.scaleLinear()\n        .domain([0,y_domain])\n        .range([300,0])\n\n        const scaley_2 = d3.scaleLog()\n        .domain([200,179000])\n        .range([300,0])\n\n        d3.select('#scatter').html(\"\");\n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .selectAll('circle')\n        .data(datafiltered)\n        .enter()\n        .append('circle')\n        .attr('cx',function(d,i) { return scalex(d.year); })\n        .attr('cy',function(d,i) { return scaley(d.median_val); })\n        .attr('r',function(d,i) { return radius; })\n        .attr('fill', function(d,i) {\n            if (d.year > 2021) {\n                return 'red';\n            }\n                return 'lightblue';\n            }\n        )\n    \n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .call(\n            d3.axisLeft(scaley)\n            // .tickValues([10,100,1000,10000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n        d3.select('svg').append('g')\n        .attr('transform','translate(50,350)')\n        .call(\n            d3.axisBottom(scalex)\n            // .tickValues([300,1000,3000,10000, 30000, 100000])\n            // .tickFormat(d3.format(\"~s\"))\n        )\n\n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,450)')\n        .selectAll('circle')\n        .data(datafiltered2)\n        .enter()\n        .append('circle')\n        .attr('cx',function(d,i) { return scalex(d.year); })\n        .attr('cy',function(d,i) { return scaley_2(d.median_val); })\n        .attr('r',function(d,i) { return radius; })\n        .attr('fill', function(d,i) {\n            if (d.year > 2021) {\n                return 'red';\n            }\n                return 'lightblue';\n            }\n        )\n    \n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,450)')\n        .call(\n            d3.axisLeft(scaley_2)\n            .tickValues([300,1000,3000,10000,30000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n        d3.select('svg').append('g')\n        .attr('transform','translate(50,750)')\n        .call(\n            d3.axisBottom(scalex)\n            // .tickValues([300,1000,3000,10000, 30000, 100000])\n            // .tickFormat(d3.format(\"~s\"))\n        )\n        \n\n    }\n\n    async componentDidMount()\n    {\n        console.log('chart mounted')\n        this.incomedata = await d3.csv(process.env.PUBLIC_URL + '/income_processed.csv');\n        // console.log(this.incomedata);\n        this.cm_data = await d3.csv(process.env.PUBLIC_URL + '/child_mortality_0_5_year_olds_dying_per_1000_born.csv');\n        // console.log(this.cm_data);\n        this.median_childmortality = []\n        this.median_income = []\n\n        for (let index = 1800; index < 2041; index++) {\n            let year_income = this.incomedata.map(\n                (x) => {                 \n                    let cm_country = this.cm_data.find(y => y.country === x.country);\n                    if (cm_country === undefined) {\n                        return null;\n                    }\n                    if (isNaN(x[index]) || isNaN(cm_country[index]))\n                    {\n                        return null;\n                    }\n                    return {'country': x.country, 'income': x[index], 'child_mortality': cm_country[[index]]} \n                }\n            ).filter(\n                x => {\n                    if (x.child_mortality > 0) return true;\n                    return false;\n                }\n            )\n\n            // console.log(year_income.length)\n            const reducer = (accumulator, currentValue) => accumulator + parseFloat(currentValue);\n            let sum_cm = year_income.map(\n                x => x.child_mortality\n            ).reduce(reducer, 0)\n            // console.log(sum_cm)\n\n            this.median_childmortality.push({'year': index, 'median_val': sum_cm / year_income.length})\n\n            let sum_income = year_income.map(\n                x => x.income\n            ).reduce(reducer, 0)\n            this.median_income.push({'year': index, 'median_val': sum_income / year_income.length})\n        }\n        console.log(this.median_childmortality);\n        console.log(this.median_income);\n\n        this.updatechart();\n        this.timerID = setInterval(\n            () => this.tick(),\n            25\n        );      \n    }\n\n    componentWillUnmount() {\n        console.log('Unmounting')\n        clearInterval(this.timerID);\n        this.timerID = null;\n        d3.select('#scatter').html(\"\");\n    }    \n\n    componentDidUpdate()\n    {\n        this.updatechart();\n    }\n\n    tick()\n    {\n        if (this.state.year >= 2040)\n        {\n            clearInterval(this.timerID);\n            this.timerID = null;\n            // this.setState((prevState, prevProps) => {\n            //     return {\n            //         'year': 2021\n            //     };\n            // }\n            // )\n            return;\n        }\n        this.setState((prevState, prevProps) => {\n            return {\n                'year': prevState.year + 1\n            };\n        }\n        )\n    }\n\n    setyear(event)\n    {\n        clearInterval(this.timerID);\n        this.timerID = null;\n        this.setState({'year': event.target.value});\n\n    }\n\n    render() {\n        return (\n            <div>\n                <form>\n                    <label for=\"year\">Please select a year: </label>\n                    <input type=\"range\" min={1800} max={2040} step={1} id=\"year\" value={this.state.year} onInput={this.setyear} />\n                    <output name=\"selected_year\" id=\"selected_year\">{this.state.year}</output>\n                </form>\n\n                <svg id='scatter' width={800} height={800} ref = {this.svgRef}>\n\n                </svg>\n            </div>\n        )\n    }\n}\n\nexport default Chart\n","import React, { Component } from 'react'\nimport * as d3 from \"d3\";\n\nexport class Plot extends Component {\n    constructor(props) {\n        super(props);\n        this.svgRef = React.createRef();\n\n        this.state = {\n            'year': 1800\n        }\n        this.setyear =this.setyear.bind(this);\n        this.tick =this.tick.bind(this);\n    }    \n\n    updatechart()\n    {\n        const year_income = this.incomedata.map(\n            (x) => {                 \n                let cm_country = this.cm_data.find(y => y.country === x.country);\n                if (cm_country === undefined) {\n                    return null;\n                }\n                if (isNaN(x[this.state.year]) || isNaN(cm_country[this.state.year]))\n                {\n                    return null;\n                }\n                return {'country': x.country, 'income': x[this.state.year], 'child_mortality': cm_country[[this.state.year]]} \n            }\n        ).filter(\n            x => {\n                if (x.child_mortality > 0) return true;\n                return false;\n            }\n        )\n        // console.log(year_income);\n\n        let y_domain = 1000;\n        let radius = 1.5;\n        if (this.timerID === null) {\n            if (this.state.year == 2021) {\n                y_domain = 150;\n            }\n            radius = 3;\n        }\n\n        const scalex = d3.scaleLog()\n        .domain([200,179000])\n        .range([0,700])\n        const scaley = d3.scaleLinear()\n        .domain([0,y_domain])\n        .range([700,0])\n\n        d3.select('#scatter').html(\"\");\n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .selectAll('circle')\n        .data(year_income)\n        .enter()\n        .append('circle')\n        .attr('cx',function(d,i) { return scalex(d.income); })\n        .attr('cy',function(d,i) { return scaley(d.child_mortality); })\n        .attr('r',function(d,i) { return radius; })\n        .attr('fill', 'lightblue')\n    \n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .call(\n            d3.axisLeft(scaley)\n            // .tickValues([10,100,1000,10000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n        d3.select('svg').append('g')\n        .attr('transform','translate(50,750)')\n        .call(\n            d3.axisBottom(scalex)\n            .tickValues([300,1000,3000,10000, 30000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n        \n    }\n\n    async componentDidMount()\n    {\n        // console.log('plot mounted')\n        console.log(process.env.PUBLIC_URL)\n        this.incomedata = await d3.csv(process.env.PUBLIC_URL + '/income_processed.csv');\n        // console.log(this.incomedata);\n        this.cm_data = await d3.csv(process.env.PUBLIC_URL + '/child_mortality_0_5_year_olds_dying_per_1000_born.csv');\n        // console.log(this.cm_data);\n\n        this.updatechart();\n        this.timerID = setInterval(\n            () => this.tick(),\n            25\n        );      \n    }\n\n    componentWillUnmount() {\n        console.log('Unmounting')\n        clearInterval(this.timerID);\n        this.timerID = null;\n        d3.select('#scatter').html(\"\");\n    }    \n\n    componentDidUpdate()\n    {\n        this.updatechart();\n    }\n\n    tick()\n    {\n        if (this.state.year >= 2040)\n        {\n            clearInterval(this.timerID);\n            this.timerID = null;\n            this.setState((prevState, prevProps) => {\n                return {\n                    'year': 2021\n                };\n            }\n            )\n            return;\n        }\n        this.setState((prevState, prevProps) => {\n            return {\n                'year': prevState.year + 1\n            };\n        }\n        )\n    }\n\n    setyear(event)\n    {\n        clearInterval(this.timerID);\n        this.timerID = null;\n        this.setState({'year': event.target.value});\n\n    }\n\n    render() {\n        return (\n            <div>\n                <form>\n                    <label for=\"year\">Please select a year: </label>\n                    <input type=\"range\" min={1800} max={2040} step={1} id=\"year\" value={this.state.year} onInput={this.setyear} />\n                    <output name=\"selected_year\" id=\"selected_year\">{this.state.year}</output>\n                </form>\n\n                <svg id='scatter' width={800} height={800} ref = {this.svgRef}>\n\n                </svg>\n            </div>\n        )\n    }\n}\n\nexport default Plot\n","import React, { Component } from 'react'\nimport * as d3 from \"d3\";\n\nexport class BarChart extends Component {\n    constructor(props) {\n        super(props);\n        this.svgRef = React.createRef();\n\n        this.state = {\n            'year': 1800\n        }\n        this.setyear =this.setyear.bind(this);\n        this.tick =this.tick.bind(this);\n    }    \n\n    updatechart()\n    {\n        let y_domain = 500;\n        let radius = 1.5;\n        if (this.state.year == 2021 && this.timerID === null) {\n            y_domain = 100;\n            radius = 3;\n        }\n\n        const year_income = this.incomedata.map(\n            (x) => {                 \n                let cm_country = this.cm_data.find(y => y.country === x.country);\n                if (cm_country === undefined) {\n                    return null;\n                }\n                if (isNaN(x[this.state.year]) || isNaN(cm_country[this.state.year]))\n                {\n                    return null;\n                }\n                return {'country': x.country, 'income': x[this.state.year], 'child_mortality': cm_country[[this.state.year]]} \n            }\n        ).filter(\n            x => {\n                if (x.child_mortality > 0) return true;\n                return false;\n            }\n        )\n\n        const year_income_sorted = year_income.sort((a, b) => parseFloat(a.income) - parseFloat(b.income))\n        const num_countries = year_income_sorted.length\n        const num_groups = 10\n        const num_countries_per_group = Math.floor(num_countries / num_groups)\n\n        let groups = {}\n        for (let index = 0; index < num_groups; index++) {\n            groups[index] = []            \n        }\n\n        for (let index = 0; index < num_countries; index++) {\n            let group_index = Math.floor(index / num_countries_per_group)\n            group_index = Math.min(group_index, num_groups - 1)\n            groups[group_index].push(year_income[index])            \n        }\n\n        let cm_group_averages = []\n        const reducer = (accumulator, currentValue) => accumulator + parseFloat(currentValue);\n        for (let index = 0; index < num_groups; index++)\n        {\n            let curr_group = groups[index]\n            let count_group = curr_group.length\n            let sum_cm_group = curr_group.map(\n                (x) => x.child_mortality\n            ).reduce(reducer, 0)\n            let sum_income_group = curr_group.map(\n                (x) => x.income\n            ).reduce(reducer, 0)\n            cm_group_averages.push({'cm_avg': sum_cm_group / count_group, 'income_avg': sum_income_group / count_group})\n        }\n\n        const scalex = d3.scaleBand()\n        .domain([...Array(num_groups).keys()])\n        .range([0,700])\n        .paddingInner(0.2)\n        .paddingOuter(0.2);\n\n        const scaley = d3.scaleLinear()\n        .domain([0,y_domain])\n        .range([700,0])\n      \n        const scaley_2 = d3.scaleLog()\n        .domain([200,179000])\n        .range([300,0])\n\n        d3.select('#scatter').html(\"\");\n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .selectAll('rect')\n        .data(cm_group_averages)\n        .enter()\n        .append('rect')\n        .attr('x',function(d,i) { return scalex(i); })\n        .attr('y',function(d,i) { return scaley(d.cm_avg); })\n        .attr('width',function(d,i) { return scalex.bandwidth(); })\n        .attr('height',function(d,i) { return (700 - scaley(d.cm_avg)); })\n        .attr('fill', function(d,i) {\n            if (d.year > 2021) {\n                return 'red';\n            }\n                return 'lightblue';\n            }\n        )\n    \n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .call(\n            d3.axisLeft(scaley)\n            // .tickValues([10,100,1000,10000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n        d3.select('svg').append('g')\n        .attr('transform','translate(50,750)')\n        .call(\n            d3.axisBottom(scalex)\n            // .tickValues([300,1000,3000,10000, 30000, 100000])\n            // .tickFormat(d3.format(\"~s\"))\n        )        \n\n    }\n\n    async componentDidMount()\n    {\n        console.log('chart mounted')\n        this.incomedata = await d3.csv(process.env.PUBLIC_URL + '/income_processed.csv');\n        // console.log(this.incomedata);\n        this.cm_data = await d3.csv(process.env.PUBLIC_URL + '/child_mortality_0_5_year_olds_dying_per_1000_born.csv');\n        // console.log(this.cm_data);\n\n        this.updatechart();\n        this.timerID = setInterval(\n            () => this.tick(),\n            25\n        );      \n    }\n\n    componentWillUnmount() {\n        console.log('Unmounting')\n        clearInterval(this.timerID);\n        this.timerID = null;\n        d3.select('#scatter').html(\"\");\n    }    \n\n    componentDidUpdate()\n    {\n        this.updatechart();\n    }\n\n    tick()\n    {\n        if (this.state.year >= 2040)\n        {\n            clearInterval(this.timerID);\n            this.timerID = null;\n            this.setState((prevState, prevProps) => {\n                return {\n                    'year': 2021\n                };\n            }\n            )\n            return;\n        }\n        this.setState((prevState, prevProps) => {\n            return {\n                'year': prevState.year + 1\n            };\n        }\n        )\n    }\n\n    setyear(event)\n    {\n        clearInterval(this.timerID);\n        this.timerID = null;\n        this.setState({'year': event.target.value});\n\n    }\n\n    render() {\n        return (\n            <div>\n                <form>\n                    <label for=\"year\">Please select a year: </label>\n                    <input type=\"range\" min={1800} max={2040} step={1} id=\"year\" value={this.state.year} onInput={this.setyear} />\n                    <output name=\"selected_year\" id=\"selected_year\">{this.state.year}</output>\n                </form>\n\n                <svg id='scatter' width={800} height={800} ref = {this.svgRef}>\n\n                </svg>\n            </div>\n        )\n    }\n}\n\nexport default BarChart\n","import React, { Component } from 'react'\nimport Chart from './Chart.js';\nimport Plot from './Plot.js';\nimport BarChart from './BarChart.js';\n\nexport class Controller extends Component {\n    constructor(props) {\n        super(props);\n        this.svgRef = React.createRef();\n\n        this.state = {\n            'scene': 0\n        }\n        this.setscene = this.setscene.bind(this);\n    }    \n\n    setscene()\n    {\n        // clearInterval(this.timerID);\n        // this.timerID = null;\n        this.setState({'scene': (this.state.scene + 1) % 3});\n\n    }\n    \n    render() {\n        if (this.state.scene == 0) {\n            return (\n                <div>\n                    <button onClick={this.setscene}>Change</button>\n                    <Plot />\n                </div>\n            )          \n        } else if (this.state.scene == 1) {\n            return (\n                <div>\n                    <button onClick={this.setscene}>Change</button>\n                    <Chart />\n                </div>\n            )\n        }\n        else {\n            return (\n                <div>\n                    <button onClick={this.setscene}>Change</button>\n                    <BarChart />\n                </div>\n            )\n        }\n    }\n}\n\nexport default Controller\n","import logo from './logo.svg';\nimport './App.css';\nimport Controller from './components/Controller.js';\nimport * as d3 from \"d3\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Controller />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}