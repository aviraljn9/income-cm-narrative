{"version":3,"sources":["logo.svg","components/Chart.js","components/Plot.js","components/BarChart.js","components/Controller.js","App.js","reportWebVitals.js","index.js"],"names":["Chart","props","svgRef","React","createRef","state","cm_plots","income_plots","setyear","bind","tick","setCurrentYear","handleSelect","addannotation","y_domain","this","country","timerID","datafiltered","filter","x","year","sort","y","parseFloat","datafiltered2","scalex","d3","domain","range","scaley","scaley_2","d","val","html","div","append","attr","style","addpath","addtooltips","call","tickFormat","text","tickValues","data","translate","graphnum","x1","x2","datay1","parseInt","datay2","length","val1","val2","y1","y2","Math","min","abs","txtbox","xt","yt","percentage_increase","toFixed","txt1","txt2","strk","datum","datastring","selectAll","enter","i","on","event","transition","duration","pageX","pageY","a","process","incomedata","cm_data","index","year_income","map","cm_country","find","undefined","isNaN","child_mortality","country_index","country_data","push","income","reducer","accumulator","currentValue","sum_cm","reduce","sum_income","updatechart","setInterval","console","log","clearInterval","setState","prevState","prevProps","target","value","all_options","Object","keys","all_countries","concat","for","type","max","step","id","onInput","name","onChange","onClick","resetFunc","sceneno","width","height","ref","Component","Plot","xSeries","ySeries","reduceSumFunc","prev","cur","xBar","yBar","ssXX","pow","ssYY","ssXY","slope","radius","color","leastSquaresCoeff","leastSquares","trendData","x3","y3","BarChart","max_year_reached","txt3","xpoint","ypoint","xarrow","yarrow","num_countries","b","num_countries_per_group","floor","groups","group_index","num_groups","cm_group_averages","curr_group","count_group","sum_cm_group","sum_income_group","cm_avg_this","Array","paddingInner","paddingOuter","cm_avg","bandwidth","income_avg","Controller","nextscene","resetscene","scene","prevscene","setscene","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7a9a6930.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, { Component } from 'react'\nimport * as d3 from \"d3\";\n\nexport class Chart extends Component {\n    constructor(props) {\n        super(props);\n        this.svgRef = React.createRef();\n\n        this.state = {\n            'year': 1800,\n            'country': 'average'\n        }\n\n        this.cm_plots = {}\n        this.income_plots = {}\n\n        this.setyear =this.setyear.bind(this);\n        this.tick =this.tick.bind(this);\n        this.setCurrentYear =this.setCurrentYear.bind(this);\n        this.handleSelect =this.handleSelect.bind(this);\n        this.addannotation =this.addannotation.bind(this);\n    }    \n\n    updatechart()\n    {\n        let y_domain = 500;\n\n        let radius = 1.5;\n        // if (this.state.year == 2021 && this.timerID === null) {\n        //     y_domain = 150;\n        //     radius = 3;\n        // }\n        if (this.state.country != 'average' && this.timerID === null) {\n            y_domain = 1000;\n        }\n\n\n        var cm_country = this.cm_plots[this.state.country];\n        let datafiltered = cm_country.filter(\n            x => x.year <= this.state.year\n        ).sort((x, y) => parseFloat(x.year) - parseFloat(y.year))\n\n        var income_country = this.income_plots[this.state.country];\n        let datafiltered2 = income_country.filter(\n            x => x.year <= this.state.year\n        ).sort((x, y) => parseFloat(x.year) - parseFloat(y.year))\n\n        const scalex = d3.scaleLinear()\n        .domain([1800,2040])\n        .range([0,700])\n        const scaley = d3.scaleLinear()\n        .domain([0,y_domain])\n        .range([300,0])\n\n        const scaley_2 = d3.scaleLog()\n        .domain([200,179000])\n        .range([300,0])\n\n        var valueline = d3.line()\n        .x(function(d) { return scalex(d.year); })\n        .y(function(d) { return scaley(d.val); });    \n\n        d3.select('#scatter').html(\"\");\n\n        d3.select('#ttip').html(\"\");\n\n        var div = d3.select('#ttip').append(\"div\")\t\n        .attr(\"class\", \"tooltip\")\t\t\t\t\n        .style(\"opacity\", 0);    \n        \n        this.addpath(datafiltered.filter(x => x.year <= 2021), 'steelblue', scalex, scaley, 'translate(50,50)')\n        this.addpath(datafiltered.filter(x => x.year >= 2021), 'red', scalex, scaley, 'translate(50,50)')\n\n        this.addannotation(datafiltered, scalex, scaley, 'translate(50,50)', 1)\n        this.addtooltips(datafiltered, scalex, scaley, div, 'translate(50,50)', 'Child mortality')\n\n\n        // g1.append(\"path\")\n        //     .attr(\"class\", \"line\")\n        //     .attr(\"d\", valueline(datafiltered));\n    \n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .call(\n            d3.axisLeft(scaley)\n            // .tickValues([10,100,1000,10000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n\n        d3.select('#scatter').append('text')\n        .attr(\"class\", \"y label\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"x\", -100)\n        .attr(\"y\", 4)\n        .attr(\"dy\", \".75em\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"font-size\",12)\n        .text('Child Mortality (per 1000)')\n\n        \n        d3.select('svg').append('g')\n        .attr('transform','translate(50,350)')\n        .call(\n            d3.axisBottom(scalex)\n            // .tickValues([300,1000,3000,10000, 30000, 100000])\n            .tickFormat(d3.format(\"d\"))\n        )\n\n        d3.select('#scatter').append('text')\n        .attr(\"class\", \"x label\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"x\", 450)\n        .attr(\"y\", 385)\n        .attr(\"font-size\",12)\n        .text('Year')\n\n\n        this.addpath(datafiltered2.filter(x => x.year <= 2021), 'steelblue', scalex, scaley_2, 'translate(50,450)')\n        this.addpath(datafiltered2.filter(x => x.year >= 2021), 'red', scalex, scaley_2, 'translate(50,450)')\n\n        this.addannotation(datafiltered2, scalex, scaley_2, 'translate(50,450)', 2)\n        this.addtooltips(datafiltered2, scalex, scaley_2, div, 'translate(50,450)', 'Income')        \n    \n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,450)')\n        .call(\n            d3.axisLeft(scaley_2)\n            .tickValues([300,1000,3000,10000,30000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n\n        d3.select('#scatter').append('text')\n        .attr(\"class\", \"y label\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"x\", -530)\n        .attr(\"y\", 4)\n        .attr(\"dy\", \".75em\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"font-size\",12)\n        .text('Income per capita ($)')\n\n        d3.select('svg').append('g')\n        .attr('transform','translate(50,750)')\n        .call(\n            d3.axisBottom(scalex)\n            // .tickValues([300,1000,3000,10000, 30000, 100000])\n            .tickFormat(d3.format(\"d\"))\n        )\n\n        d3.select('#scatter').append('text')\n        .attr(\"class\", \"x label\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"x\", 450)\n        .attr(\"y\", 785)\n        .attr(\"font-size\",12)\n        .text('Year')\n\n        \n        d3.select('#scatter').append(\"circle\").attr(\"cx\",600).attr(\"cy\",60).attr(\"r\", 4).style(\"fill\", \"steelblue\")\n        d3.select('#scatter').append(\"circle\").attr(\"cx\",600).attr(\"cy\",80).attr(\"r\", 4).style(\"fill\", \"red\")\n        d3.select('#scatter').append(\"text\").attr(\"x\", 620).attr(\"y\", 60).text(\"historical\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\",\"middle\")\n        d3.select('#scatter').append(\"text\").attr(\"x\", 620).attr(\"y\", 80).text(\"projected\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\",\"middle\")\n\n        d3.select('#scatter').append(\"circle\").attr(\"cx\",600).attr(\"cy\",460).attr(\"r\", 4).style(\"fill\", \"steelblue\")\n        d3.select('#scatter').append(\"circle\").attr(\"cx\",600).attr(\"cy\",480).attr(\"r\", 4).style(\"fill\", \"red\")\n        d3.select('#scatter').append(\"text\").attr(\"x\", 620).attr(\"y\", 460).text(\"historical\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\",\"middle\")\n        d3.select('#scatter').append(\"text\").attr(\"x\", 620).attr(\"y\", 480).text(\"projected\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\",\"middle\")\n\n    }\n\n    addannotation(data, scalex, scaley, translate, graphnum)\n    {\n        if (this.timerID === null && this.state.year > 1975)\n        {\n            var year1 = 1925;\n            var year2 = 1975;\n            var x1 = scalex(year1);\n            var x2 = scalex(year2);\n            var datay1 = data.filter(x => parseInt(x.year) == year1);\n            var datay2 = data.filter(x => parseInt(x.year) == year2);\n            if (datay1.length == 0 || datay2.length == 0)\n            {\n                return\n            }\n\n            var val1 = parseFloat(datay1[0].val)\n            var val2 = parseFloat(datay2[0].val)\n\n            var y1 = scaley(val1)\n            var y2 = scaley(val2)\n\n            d3.select('#scatter').append('g')\n            .attr('transform',translate)                \n                .append(\"rect\")\n                .attr(\"x\", x1)\n                .attr(\"y\", Math.min(y1, y2))\n                .attr(\"width\", x2 - x1)\n                .attr(\"height\", Math.abs(y2-y1))\n                .attr(\"stroke\", \"black\")\n                .attr(\"fill-opacity\", 0.2)\n                .attr(\"stroke-width\", \"3\")\n                .attr(\"stroke-dasharray\", \"4\")\n\n            var xt = x1\n            var yt = Math.min(y1, y2) - 60;\n\n            var percentage_increase = ((val2 / val1 - 1) * 100).toFixed(2);\n            var txt1 = \"\"\n            var txt2 = \"\"\n            if (graphnum == 1)\n            {\n                percentage_increase = -percentage_increase\n                txt1 = \"decrease\"\n                txt2 = \"child mortality\"\n\n                var txtbox = d3.select('#scatter').append('g')\n                .attr('transform',translate)\n                .append('text')\n                .attr(\"x\", xt)\n                .attr(\"y\", yt)\n                .attr(\"class\", \"text-label\")\n                .text(\"Percentage \" + txt1 + \" in \" )\n    \n                txtbox.append('tspan')\n                .text(txt2 + \" during \")\n                .attr(\"x\", xt)\n                .attr(\"y\", yt + 20)\n                txtbox.append('tspan')\n                .text(\"1925 - 1975: \" + percentage_increase)\n                .attr(\"x\", xt)\n                .attr(\"y\", yt + 40)\n    \n            }\n\n            if (graphnum == 2)\n            {\n                txt1 = \"increase\"\n                txt2 = \"income\"\n\n                var txtbox = d3.select('#scatter').append('g')\n                .attr('transform',translate)\n                .append('text')\n                .attr(\"x\", xt)\n                .attr(\"y\", yt + 20)\n                .attr(\"class\", \"text-label\")\n                .text(\"...while percentage \" + txt1)\n    \n                txtbox.append('tspan')\n                .text(\"in income: \" + percentage_increase)\n                .attr(\"x\", xt)\n                .attr(\"y\", yt + 40)\n    \n            }\n        }\n    }    \n\n    addpath(data, strk, scalex, scaley, translate)\n    {\n        d3.select('#scatter').append('g')\n        .attr('transform', translate)\n        .append('path')\n        .datum(data)\n        .attr('fill', 'none')\n        .attr('stroke', strk)\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", d3.line()\n            .x(function(d) { return scalex(d.year); })\n            .y(function(d) { return scaley(d.val); })\n        )\n    }\n\n    addtooltips(data, scalex, scaley, div, translate, datastring)\n    {\n        d3.select('#scatter').append('g')\n        .attr('transform',translate)\n        .selectAll('rect')\n        .data(data)\n        .enter()\n        .append('rect')\n        .attr('class', 'ttrect')\n        .attr('x',function(d,i) { return scalex(d.year); })\n        .attr('y',function(d,i) { return 0; })\n        .attr('width',function(d,i) { return 1; })\n        .attr('height', function(d,i) { return 300; })\n        .attr('fill', 'black')\n        .attr('opacity', 0)\n        .on(\"mouseover\", function(event, d) {\n            d3.select(this).attr(\"opacity\", 1)\t\t\n            div.transition()\t\t\n                .duration(200)\t\t\n                .style(\"opacity\", 1);\t\t\n            div.html(d.year + \"<br/>\" + datastring + \": \" + d.val)\t\n                .style(\"left\", (event.pageX) + \"px\")\t\t\n                .style(\"top\", (event.pageY - 28) + \"px\");\t\n            })\t\t\t\t\t\n        .on(\"mouseout\", function(event, d) {\t\t\n            d3.select(this).attr(\"opacity\", 0)\t\t\n            div.transition()\t\t\n                .duration(500)\t\t\n                .style(\"opacity\", 0);\t\n            });\n    }\n\n    async componentDidMount()\n    {\n        // console.log('chart mounted')\n        this.incomedata = await d3.csv(process.env.PUBLIC_URL + '/income_processed.csv');\n        // console.log(this.incomedata);\n        this.cm_data = await d3.csv(process.env.PUBLIC_URL + '/child_mortality_0_5_year_olds_dying_per_1000_born.csv');\n        // console.log(this.cm_data);\n\n        this.cm_plots = {}\n        this.cm_plots['average'] = []\n        \n        this.income_plots = {}\n        this.income_plots['average'] = []\n\n        for (let index = 1800; index < 2041; index++) {\n            let year_income = this.incomedata.map(\n                (x) => {                 \n                    let cm_country = this.cm_data.find(y => y.country === x.country);\n                    if (cm_country === undefined) {\n                        return null;\n                    }\n                    if (isNaN(x[index]) || isNaN(cm_country[index]))\n                    {\n                        return null;\n                    }\n                    return {'country': x.country, 'income': x[index], 'child_mortality': cm_country[[index]]} \n                }\n            ).filter(\n                x => {\n                    if (x.child_mortality > 0) return true;\n                    return false;\n                }\n            )\n\n            for (let country_index = 0; country_index < year_income.length; country_index++) {\n                const country_data = year_income[country_index];\n                if (!(country_data.country in this.cm_plots))\n                {\n                    this.cm_plots[country_data.country] = [];\n                    this.income_plots[country_data.country] = [];\n                }\n                this.cm_plots[country_data.country].push({'year': index, 'val': country_data.child_mortality});\n                this.income_plots[country_data.country].push({'year': index, 'val': country_data.income});\n            }\n\n            // console.log(year_income.length)\n            const reducer = (accumulator, currentValue) => accumulator + parseFloat(currentValue);\n            let sum_cm = year_income.map(\n                x => x.child_mortality\n            ).reduce(reducer, 0)\n            // console.log(sum_cm)\n\n            this.cm_plots['average'].push({'year': index, 'val': (sum_cm / year_income.length).toFixed(2)})\n\n            let sum_income = year_income.map(\n                x => x.income\n            ).reduce(reducer, 0)\n            this.income_plots['average'].push({'year': index, 'val': (sum_income / year_income.length).toFixed(2)})\n        }\n        // console.log(this.average_childmortality);\n        // console.log(this.average_income);\n\n        this.updatechart();\n        this.timerID = setInterval(\n            () => this.tick(),\n            25\n        );      \n    }\n\n    componentWillUnmount() {\n        console.log('Unmounting')\n        clearInterval(this.timerID);\n        this.timerID = null;\n        d3.select('#scatter').html(\"\");\n        d3.select('#ttip').html(\"\");\n    }    \n\n    componentDidUpdate()\n    {\n        this.updatechart();\n    }\n\n    tick()\n    {\n        if (this.state.year >= 2040)\n        {\n            clearInterval(this.timerID);\n            this.timerID = null;\n            this.setState((prevState, prevProps) => {\n                return {\n                    'country': prevState.country,\n                    'year': 2040\n                };\n            }\n            )\n            return;\n        }\n        this.setState((prevState, prevProps) => {\n            return {\n                'country': prevState.country,\n                'year': prevState.year + 1\n            };\n        }\n        )\n    }\n\n    setyear(event)\n    {\n        clearInterval(this.timerID);\n        this.timerID = null;\n        this.setState(\n            {\n                'country': this.state.country,\n                'year': event.target.value\n            }\n        );\n\n    }\n\n    setCurrentYear()\n    {\n        clearInterval(this.timerID);\n        this.timerID = null;\n        this.setState(\n            {\n                'country': this.state.country,\n                'year': 2040\n            }\n        );\n    }\n\n    handleSelect(event)\n    {\n        this.setState(\n            {\n                'country': event.target.value,\n                'year': this.state.year\n            }\n        );\n    }\n\n    render() {\n        let all_options = Object.keys(this.cm_plots)\n        var all_countries = all_options.filter(x => x != \"average\").sort()\n        all_options = [\"average\"].concat(all_countries)\n        return (\n            <div>\n                <form>\n                    <label for=\"year\">Please select a year: </label>\n                    <input type=\"range\" min={1800} max={2040} step={1} id=\"year\" value={this.state.year} onInput={this.setyear} />\n                    <output name=\"selected_year\" id=\"selected_year\"><b>{this.state.year}</b></output>\n                </form>\n\n                {\n                    this.timerID === null &&\n                    (\n                        <div>\n                            <br></br>\n                            <label> <b>Please select a Country: </b></label>\n                            <select value={this.state.country} onChange={this.handleSelect}>\n                                {\n\n                                    all_options.map(\n                                        (x) => { return (<option value={x}>{x}</option>); }\n                                    )\n                                }\n                            </select>\n                        </div>\n                    )\n                }\n\n                <br></br>\n                <div>\n                    <button onClick = {this.setCurrentYear}>Display complete curve</button>\n                    <button onClick = {() => this.props.resetFunc(this.props.sceneno)}>Restart this scene</button>\n                </div>\n\n                <div id='ttip'></div>\n\n                <svg id='scatter' width={800} height={800} ref = {this.svgRef}>\n\n                </svg>\n\n            </div>\n        )\n    }\n}\n\nexport default Chart\n","import React, { Component } from 'react'\nimport * as d3 from \"d3\";\n\nexport class Plot extends Component {\n    constructor(props) {\n        super(props);\n        this.svgRef = React.createRef();\n\n        this.state = {\n            'year': 1800\n        }\n        this.setyear =this.setyear.bind(this);\n        this.tick =this.tick.bind(this);\n        this.setCurrentYear =this.setCurrentYear.bind(this);\n    }    \n\n\tleastSquares(xSeries, ySeries) {\n\t\tvar reduceSumFunc = function(prev, cur) { return prev + cur; };\n            \n\t\tvar xBar = xSeries.reduce(reduceSumFunc) * 1.0 / xSeries.length;\n\t\tvar yBar = ySeries.reduce(reduceSumFunc) * 1.0 / ySeries.length;\n\n\t\tvar ssXX = xSeries.map(function(d) { return Math.pow(d - xBar, 2); })\n\t\t\t.reduce(reduceSumFunc);\n\t\t\n\t\tvar ssYY = ySeries.map(function(d) { return Math.pow(d - yBar, 2); })\n\t\t\t.reduce(reduceSumFunc);\n\t\t\t\n\t\tvar ssXY = xSeries.map(function(d, i) { return (d - xBar) * (ySeries[i] - yBar); })\n\t\t\t.reduce(reduceSumFunc);\n            \n\t\tvar slope = ssXY / ssXX;\n\t\tvar intercept = yBar - (xBar * slope);\n\t\tvar rSquare = Math.pow(ssXY, 2) / (ssXX * ssYY);\n\t\t\n\t\treturn [slope, intercept, rSquare];\n\t}\n\n    updatechart()\n    {\n        const year_income = this.incomedata.map(\n            (x) => {                 \n                let cm_country = this.cm_data.find(y => y.country === x.country);\n                if (cm_country === undefined) {\n                    return null;\n                }\n                if (isNaN(x[this.state.year]) || isNaN(cm_country[this.state.year]))\n                {\n                    return null;\n                }\n                return {'country': x.country, 'income': x[this.state.year], 'child_mortality': cm_country[[this.state.year]]} \n            }\n        ).filter(\n            x => {\n                if (x.child_mortality > 0) return true;\n                return false;\n            }\n        )\n        // console.log(year_income);\n\n        let y_domain = 1000;\n        let radius = 1.5;\n        let color = 'lightblue'\n        if (this.timerID === null) {\n            if (this.state.year == 2021) {\n                y_domain = 150;\n            }\n            radius = 3;\n        }\n\n        if (this.state.year > 2021)\n        {\n            color = 'red'\n        }\n        if (this.state.year == 2021)\n        {\n            color = 'orange'\n        }\n\n        const scalex = d3.scaleLog()\n        .domain([200,179000])\n        .range([0,700])\n        const scaley = d3.scaleLinear()\n        .domain([0,y_domain])\n        .range([700,0])\n\n        d3.select('#scatter').html(\"\");\n        d3.select('#ttip').html(\"\");\n\n        var div = d3.select('#ttip').append(\"div\")\t\n        .attr(\"class\", \"tooltip\")\t\t\t\t\n        .style(\"opacity\", 0);    \n\n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .selectAll('circle')\n        .data(year_income)\n        .enter()\n        .append('circle')\n        .attr('cx',function(d,i) { return scalex(d.income); })\n        .attr('cy',function(d,i) { return scaley(d.child_mortality); })\n        .attr('r',function(d,i) { return radius; })\n        .attr('fill', color)\n        .on(\"mouseover\", function(event, d) {\t\t\n            div.transition()\t\t\n                .duration(200)\t\t\n                .style(\"opacity\", 1);\t\t\n            div.html(d.country + \"<br/>Income: $\" + d.income + \"<br/>Child mortality: \"  + d.child_mortality)\t\n                .style(\"left\", (event.pageX) + \"px\")\t\t\n                .style(\"top\", (event.pageY - 28) + \"px\");\t\n            })\t\t\t\t\t\n        .on(\"mouseout\", function(d) {\t\t\n            div.transition()\t\t\n                .duration(500)\t\t\n                .style(\"opacity\", 0);\t\n            });\n    \n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .call(\n            d3.axisLeft(scaley)\n            // .tickValues([10,100,1000,10000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n\n        d3.select('#scatter').append('text')\n        .attr(\"class\", \"y label\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"x\", -200)\n        .attr(\"y\", 4)\n        .attr(\"dy\", \".75em\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"font-size\",14)\n        .text('Child Mortality: 0-5 year-olds dying per 1000 born')\n\n\n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,750)')\n        .call(\n            d3.axisBottom(scalex)\n            .tickValues([300,1000,3000,10000, 30000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n\n        d3.select('#scatter').append('text')\n        .attr(\"class\", \"x label\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"x\", 650)\n        .attr(\"y\", 785)\n        .attr(\"font-size\",12)\n        .text('Income: GDP per capital, adjusted for inflation and PPP (in international dollars, fixed 2011 prices)')\n\n        if (this.timerID === null)\n        {\n            var ySeries = year_income.map(x => parseFloat(scaley(x.child_mortality)));\n            var xSeries = year_income.map(x => parseFloat(scalex(x.income)));\n    \n            var leastSquaresCoeff = this.leastSquares(xSeries, ySeries);\n\t\t\n            var x1 = 0;\n            var y1 = leastSquaresCoeff[1];\n            var y2 = 700;\n            var x2 = (y2 - leastSquaresCoeff[1]) / leastSquaresCoeff[0];\n\n            if (x2 > 700)\n            {\n                x2 = 700\n                y2 = leastSquaresCoeff[0] * x2 + leastSquaresCoeff[1]\n            }\n            var trendData = [[x1,y1,x2,y2]];\n            \n            var trendline = d3.select('#scatter').append('g')\n            .attr('transform','translate(50,50)')\n            .selectAll(\".trendline\")\n            .data(trendData);\n                \n            trendline.enter()\n                .append(\"line\")\n                .attr(\"class\", \"trendline\")\n                .attr(\"x1\", function(d) { return d[0]; })\n                .attr(\"y1\", function(d) { return d[1]; })\n                .attr(\"x2\", function(d) { return d[2]; })\n                .attr(\"y2\", function(d) { return d[3]; })\n                .attr(\"stroke\", \"black\")\n                .attr(\"stroke-dasharray\", \"4\")\n                .attr(\"stroke-width\", 1);\n\n            var xt = 500\n            var yt = 300\n\n            var txtbox = d3.select('#scatter').append('g')\n            .attr('transform','translate(50,50)')\n            .append('text')\n            .attr(\"x\", xt)\n            .attr(\"y\", yt)\n            .attr(\"class\", \"text-label\")\n            .text(\"Negative slope of \")\n            // .attr(\"textLength\", 200)\n\n            txtbox.append('tspan')\n            .text(\"trend line indicates \")\n            .attr(\"x\", xt)\n            .attr(\"y\", yt + 20)\n            // .attr(\"textLength\", 200)    \n            txtbox.append('tspan')\n            .text(\"the correlation\")\n            .attr(\"x\", xt)\n            .attr(\"y\", yt + 40)\n            // .attr(\"textLength\", 200)    \n            txtbox.append('tspan')\n            .text(\"between income and\")\n            .attr(\"x\", xt)\n            .attr(\"y\", yt + 60)\n            // .attr(\"textLength\", 200)    \n            txtbox.append('tspan')\n            .text(\"child mortality\")\n            .attr(\"x\", xt)\n            .attr(\"y\", yt + 80)\n            // .attr(\"textLength\", 200)    \n\n            d3.select('#scatter').append('g')\n            .attr('transform','translate(50,50)')\n            .append(\"defs\")\n            .append(\"marker\")\n            .attr('id','arrow')\n            .attr('viewBox',\"0 -5 10 10\")\n            .attr('refX',5)\n            .attr('refY',0)\n            .attr('markerWidth',12)\n            .attr('markerHeight',12)\n            .attr('orient','auto')\n            .append(\"path\")\n            .attr(\"d\", \"M0,-5L10,0L0,5\")\n            .attr(\"class\",\"arrowHead\");\n\n            var x3 = x2 - 100\n            var y3 = leastSquaresCoeff[0] * x3 + leastSquaresCoeff[1]\n\n            d3.select('#scatter').append('g')\n            .attr('transform','translate(50,50)')                \n            .append(\"line\")\n            .attr(\"class\", \"labelline\")\n            .attr(\"x1\", xt + 50)\n            .attr(\"y1\", yt + 90)\n            .attr(\"x2\", function(d) { return x3; })\n            .attr(\"y2\", function(d) { return y3 - 5; })\n            .attr(\"stroke\", \"black\")\n            // .attr(\"stroke-dasharray\", \"4\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"marker-end\", \"url(#arrow)\")\n                                    \n        }\n        \n    }\n\n    async componentDidMount()\n    {\n        // console.log('plot mounted')\n        this.incomedata = await d3.csv(process.env.PUBLIC_URL + '/income_processed.csv');\n        // console.log(this.incomedata);\n        this.cm_data = await d3.csv(process.env.PUBLIC_URL + '/child_mortality_0_5_year_olds_dying_per_1000_born.csv');\n        // console.log(this.cm_data);\n\n        this.updatechart();\n        this.timerID = setInterval(\n            () => this.tick(),\n            25\n        );      \n    }\n\n    componentWillUnmount() {\n        console.log('Unmounting')\n        clearInterval(this.timerID);\n        this.timerID = null;\n        d3.select('#scatter').html(\"\");\n        d3.select('#ttip').html(\"\");\n    }    \n\n    componentDidUpdate()\n    {\n        this.updatechart();\n    }\n\n    tick()\n    {\n        if (this.state.year >= 2040)\n        {\n            clearInterval(this.timerID);\n            this.timerID = null;\n            this.setState((prevState, prevProps) => {\n                return {\n                    'year': 2021\n                };\n            }\n            )\n            return;\n        }\n        this.setState((prevState, prevProps) => {\n            return {\n                'year': prevState.year + 1\n            };\n        }\n        )\n    }\n\n    setyear(event)\n    {\n        clearInterval(this.timerID);\n        this.timerID = null;\n        this.setState({'year': event.target.value});\n\n    }\n\n    setCurrentYear()\n    {\n        clearInterval(this.timerID);\n        this.timerID = null;\n        this.setState({'year': 2021});\n\n    }\n\n    render() {\n        return (\n            <div>\n                <form>\n                    <label for=\"year\">Please select a year: </label>\n                    <input type=\"range\" min={1800} max={2040} step={1} id=\"year\" value={this.state.year} onInput={this.setyear} />\n                    <output name=\"selected_year\" id=\"selected_year\"><b>{this.state.year}</b></output>\n                </form>\n\n                <br></br>\n                <div>\n                    <button onClick = {this.setCurrentYear}>Show 2021 data</button>\n                    <button onClick = {() => this.props.resetFunc(this.props.sceneno)}>Restart this scene</button>\n                </div>\n\n                <div id='ttip'></div>\n\n                <svg id='scatter' width={800} height={800} ref = {this.svgRef}>\n\n                </svg>\n            </div>\n        )\n    }\n}\n\nexport default Plot\n","import React, { Component } from 'react'\nimport * as d3 from \"d3\";\n\nexport class BarChart extends Component {\n    constructor(props) {\n        super(props);\n        this.svgRef = React.createRef();\n\n        this.state = {\n            'year': 1800\n        }\n        this.setyear =this.setyear.bind(this);\n        this.tick =this.tick.bind(this);\n        this.setCurrentYear =this.setCurrentYear.bind(this);\n        this.addannotation =this.addannotation.bind(this);\n\n        this.max_year_reached = {}\n    }    \n\n    addannotation(x, y, txt1, txt2, txt3, xpoint, ypoint, xarrow, yarrow)\n    {\n        if (this.timerID === null && this.state.year == 2021)\n        {\n            var txtbox = d3.select('#scatter').append('g')\n            .attr('transform','translate(50,50)')\n            .append('text')\n            .attr(\"x\", x)\n            .attr(\"y\", y)\n            .attr(\"class\", \"text-label\")\n            .text(txt1)\n\n            txtbox.append('tspan')\n            .text(txt2)\n            .attr(\"x\", x)\n            .attr(\"y\", y + 20)\n\n            txtbox.append('tspan')\n            .text(txt3)\n            .attr(\"x\", x)\n            .attr(\"y\", y + 40)\n    \n\n            d3.select('#scatter').append('g')\n            .attr('transform','translate(50,50)')\n            .append(\"defs\")\n            .append(\"marker\")\n            .attr('id','arrow')\n            .attr('viewBox',\"0 -5 10 10\")\n            .attr('refX',5)\n            .attr('refY',0)\n            .attr('markerWidth',12)\n            .attr('markerHeight',12)\n            .attr('orient','auto')\n            .append(\"path\")\n            .attr(\"d\", \"M0,-5L10,0L0,5\")\n            .attr(\"class\",\"arrowHead\");\n\n            d3.select('#scatter').append('g')\n            .attr('transform','translate(50,50)')                \n            .append(\"line\")\n            .attr(\"class\", \"labelline\")\n            .attr(\"x1\", xpoint)\n            .attr(\"y1\", ypoint)\n            .attr(\"x2\", xarrow)\n            .attr(\"y2\", yarrow)\n            .attr(\"stroke\", \"black\")\n            // .attr(\"stroke-dasharray\", \"4\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"marker-end\", \"url(#arrow)\")\n        }\n    }    \n\n\n    updatechart()\n    {\n        let y_domain = 500;\n        let radius = 1.5;\n\n        let color = 'lightblue'\n        if (this.state.year > 2021)\n        {\n            color = 'red'\n        }\n        if (this.state.year == 2021)\n        {\n            color = 'orange'\n        }\n\n        if (this.state.year == 2021 && this.timerID === null) {\n            y_domain = 130;\n            radius = 3;\n        }\n\n        const year_income = this.incomedata.map(\n            (x) => {                 \n                let cm_country = this.cm_data.find(y => y.country === x.country);\n                if (cm_country === undefined) {\n                    return null;\n                }\n                if (isNaN(x[this.state.year]) || isNaN(cm_country[this.state.year]))\n                {\n                    return null;\n                }\n                return {'country': x.country, 'income': x[this.state.year], 'child_mortality': cm_country[[this.state.year]]} \n            }\n        ).filter(\n            x => {\n                if (x.child_mortality > 0) return true;\n                return false;\n            }\n        )\n\n        const year_income_sorted = year_income.sort((a, b) => parseFloat(a.income) - parseFloat(b.income))\n        const num_countries = year_income_sorted.length\n        const num_groups = 10\n        const num_countries_per_group = Math.floor(num_countries / num_groups)\n\n        let groups = {}\n        for (let index = 0; index < num_groups; index++) {\n            groups[index] = []            \n        }\n\n        for (let index = 0; index < num_countries; index++) {\n            let group_index = Math.floor(index / num_countries_per_group)\n            group_index = Math.min(group_index, num_groups - 1)\n            groups[group_index].push(year_income[index])            \n        }\n\n        let cm_group_averages = []\n        const reducer = (accumulator, currentValue) => accumulator + parseFloat(currentValue);\n        for (let index = 0; index < num_groups; index++)\n        {\n            let curr_group = groups[index]\n            let count_group = curr_group.length\n            let sum_cm_group = curr_group.map(\n                (x) => x.child_mortality\n            ).reduce(reducer, 0)\n            let sum_income_group = curr_group.map(\n                (x) => x.income\n            ).reduce(reducer, 0)\n            var cm_avg_this = (sum_cm_group / count_group).toFixed(2);\n            cm_group_averages.push({'cm_avg': cm_avg_this, 'income_avg': (sum_income_group / count_group).toFixed(2)})\n\n            if (cm_avg_this < 100)\n            {\n                if (!(index in this.max_year_reached))\n                {\n                    this.max_year_reached[index] = this.state.year;\n                }\n                else \n                {\n                    this.max_year_reached[index] = Math.min(this.max_year_reached[index], this.state.year)\n                }\n            }\n        }\n\n        const scalex = d3.scaleBand()\n        .domain([...Array(num_groups).keys()].map(x=>x+1))\n        .range([0,700])\n        .paddingInner(0.2)\n        .paddingOuter(0.2);\n\n        const scaley = d3.scaleLinear()\n        .domain([0,y_domain])\n        .range([700,0])\n      \n        const scaley_2 = d3.scaleLog()\n        .domain([200,179000])\n        .range([300,0])\n\n        d3.select('#scatter').html(\"\");\n\n        this.addannotation(20, 200, \"Average child mortality of\", \"group 1 countries dropped below 100\", \"for the first time in 2011\", 100, 250, 40, 320)\n\n        this.addannotation(300, 500, \"For group 5, average below 100\", \"was reached in 1982\", \"\", 370, 530, 320, 570)\n\n        this.addannotation(550, 600, \"And for group 10, 1949\", \"\", \"\", 620, 610, 650, 660)\n\n        // this.addannotation(cm_group_averages, scalex, scaley, 1, 20, 200, \"Average child mortality of\", \"group 1 countries dropped below 100\", \"for the first time in 2011\", 0, 0)\n\n        d3.select('#ttip').html(\"\");\n\n        var div = d3.select('#ttip').append(\"div\")\t\n        .attr(\"class\", \"tooltip\")\t\t\t\t\n        .style(\"opacity\", 0);    \n\n\n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .selectAll('rect')\n        .data(cm_group_averages)\n        .enter()\n        .append('rect')\n        .attr('x',function(d,i) { return scalex(i + 1); })\n        .attr('y',function(d,i) { return scaley(d.cm_avg); })\n        .attr('width',function(d,i) { return scalex.bandwidth(); })\n        .attr('height',function(d,i) { return (700 - scaley(d.cm_avg)); })\n        .attr('fill', color)\n        .on(\"mouseover\", function(event, d) {\t\t\n            div.transition()\t\t\n                .duration(200)\t\t\n                .style(\"opacity\", 1);\t\t\n            div.html(\"Average Income: $\" + d.income_avg + \"<br/>Average Child Mortality: \" + d.cm_avg)\t\n                .style(\"left\", (event.pageX) + \"px\")\t\t\n                .style(\"top\", (event.pageY - 28) + \"px\");\t\n            })\t\t\t\t\t\n        .on(\"mouseout\", function(d) {\t\t\n            div.transition()\t\t\n                .duration(500)\t\t\n                .style(\"opacity\", 0);\t\n            });\n\n            \n        d3.select('#scatter').append('g')\n        .attr('transform','translate(50,50)')\n        .call(\n            d3.axisLeft(scaley)\n            // .tickValues([10,100,1000,10000, 100000])\n            .tickFormat(d3.format(\"~s\"))\n        )\n\n        d3.select('#scatter').append('text')\n        .attr(\"class\", \"y label\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"x\", -300)\n        .attr(\"y\", 4)\n        .attr(\"dy\", \".75em\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"font-size\",14)\n        .text('Average Child Mortality rate')\n\n        d3.select('svg').append('g')\n        .attr('transform','translate(50,750)')\n        .call(\n            d3.axisBottom(scalex)\n            // .tickValues([300,1000,3000,10000, 30000, 100000])\n            // .tickFormat(d3.format(\"~s\"))\n        )        \n\n        d3.select('#scatter').append('text')\n        .attr(\"class\", \"x label\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"x\", 550)\n        .attr(\"y\", 785)\n        .attr(\"font-size\",12)\n        .text('Group number (grouped by average income ranks: 1(lowest) to 10(highest))')\n\n\n    }\n\n    async componentDidMount()\n    {\n        console.log('chart mounted')\n        this.incomedata = await d3.csv(process.env.PUBLIC_URL + '/income_processed.csv');\n        // console.log(this.incomedata);\n        this.cm_data = await d3.csv(process.env.PUBLIC_URL + '/child_mortality_0_5_year_olds_dying_per_1000_born.csv');\n        // console.log(this.cm_data);\n\n        this.updatechart();\n        this.timerID = setInterval(\n            () => this.tick(),\n            25\n        );      \n    }\n\n    componentWillUnmount() {\n        console.log('Unmounting')\n        clearInterval(this.timerID);\n        this.timerID = null;\n        d3.select('#scatter').html(\"\");\n        d3.select('#ttip').html(\"\");\n    }    \n\n    componentDidUpdate()\n    {\n        this.updatechart();\n    }\n\n    tick()\n    {\n        if (this.state.year >= 2040)\n        {\n            console.log(this.max_year_reached)\n            clearInterval(this.timerID);\n            this.timerID = null;\n            this.setState((prevState, prevProps) => {\n                return {\n                    'year': 2021\n                };\n            }\n            )\n            return;\n        }\n        this.setState((prevState, prevProps) => {\n            return {\n                'year': prevState.year + 1\n            };\n        }\n        )\n    }\n\n    setyear(event)\n    {\n        clearInterval(this.timerID);\n        this.timerID = null;\n        this.setState({'year': event.target.value});\n\n    }\n\n    setCurrentYear()\n    {\n        clearInterval(this.timerID);\n        this.timerID = null;\n        this.setState({'year': 2021});\n\n    }\n\n    render() {\n        return (\n            <div>\n                <form>\n                    <label for=\"year\">Please select a year: </label>\n                    <input type=\"range\" min={1800} max={2040} step={1} id=\"year\" value={this.state.year} onInput={this.setyear} />\n                    <output name=\"selected_year\" id=\"selected_year\"><b>{this.state.year}</b></output>\n                </form>\n\n                <br></br>\n                <div>\n                    <button onClick = {this.setCurrentYear}>Show annotated 2021 data</button>\n                    <button onClick = {() => this.props.resetFunc(this.props.sceneno)}>Restart this scene</button>\n                </div>\n\n                <div id='ttip'></div>\n\n                <svg id='scatter' width={800} height={800} ref = {this.svgRef}>\n\n                </svg>\n            </div>\n        )\n    }\n}\n\nexport default BarChart\n","import React, { Component } from 'react'\nimport Chart from './Chart.js';\nimport Plot from './Plot.js';\nimport BarChart from './BarChart.js';\n\nexport class Controller extends Component {\n    constructor(props) {\n        super(props);\n        this.svgRef = React.createRef();\n\n        this.state = {\n            'scene': 0,\n            'prevscene': 0\n        }\n        this.nextscene = this.nextscene.bind(this);\n        this.resetscene = this.resetscene.bind(this);\n    }    \n\n    nextscene()\n    {\n        // clearInterval(this.timerID);\n        // this.timerID = null;\n        this.setState({'scene': (this.state.scene + 1) % 3, 'prevscene': (this.state.scene + 1) % 3});\n\n    }\n\n    setscene(x)\n    {\n        // clearInterval(this.timerID);\n        // this.timerID = null;\n        this.setState({'scene': x, 'prevscene': x});\n\n    }\n\n    resetscene(x)\n    {\n        console.log('resetting')\n        console.log(x);\n        this.setState({'scene': -1, 'prevscene': x});\n    }\n\n    componentDidUpdate()\n    {\n        if (this.state.scene == -1)\n        {\n            this.setState({'scene': this.state.prevscene, 'prevscene': this.state.prevscene});\n        }\n    }\n    \n    render() {\n        if (this.state.scene == 0) {\n            return (\n                <div>\n                    <button onClick={()=>this.setscene(0)}>Previous</button>\n                    <button onClick={()=>this.resetscene(0)}>Scene 1</button>\n                    <button onClick={()=>this.setscene(1)}>Scene 2</button>\n                    <button onClick={()=>this.setscene(2)}>Scene 3</button>\n                    <button onClick={()=>this.setscene(1)}>Next</button>\n                    <h2>\n                        Scene 1: Child mortality vs Income of Countries (Through the years)  \n                    </h2>\n                    <Plot resetFunc = {this.resetscene} sceneno = {this.state.scene} />\n                    <p>Source: Free data from gapminder.org, CC-BY LICENSE</p>\n                </div>\n            )          \n        } else if (this.state.scene == 1) {\n            return (\n                <div>\n                    <button onClick={()=>this.setscene(0)}>Previous</button>\n                    <button onClick={()=>this.setscene(0)}>Scene 1</button>\n                    <button onClick={()=>this.resetscene(1)}>Scene 2</button>\n                    <button onClick={()=>this.setscene(2)}>Scene 3</button>\n                    <button onClick={()=>this.setscene(2)}>Next</button>\n                    <h2>\n                        Scene 2: Average Child Mortality (up) and Average Income (down) per year  \n                    </h2>\n                    <Chart resetFunc = {this.resetscene} sceneno = {this.state.scene} />\n                    <p>Source: Free data from gapminder.org, CC-BY LICENSE</p>\n                </div>\n            )\n        }\n        else if (this.state.scene == 2) {\n            return (\n                <div>\n                    <button onClick={()=>this.setscene(1)}>Previous</button>\n                    <button onClick={()=>this.setscene(0)}>Scene 1</button>\n                    <button onClick={()=>this.setscene(1)}>Scene 2</button>\n                    <button onClick={()=>this.resetscene(2)}>Scene 3</button>\n                    <button onClick={()=>this.setscene(2)}>Next</button>\n                    <h2>\n                        Scene 3: Distribution of average child mortality across country deciles by income (Through the years) \n                    </h2>\n                    <BarChart resetFunc = {this.resetscene} sceneno = {this.state.scene} />\n                    <p>Source: Free data from gapminder.org, CC-BY LICENSE</p>\n                </div>\n            )\n        }\n        else {\n            return null;\n        }\n    }\n}\n\nexport default Controller\n","import logo from './logo.svg';\nimport './App.css';\nimport Controller from './components/Controller.js';\nimport * as d3 from \"d3\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Controller />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}