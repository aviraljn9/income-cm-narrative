(this["webpackJsonpincome-cm-narrative"]=this["webpackJsonpincome-cm-narrative"]||[]).push([[0],{107:function(t,e,r){},108:function(t,e,r){},111:function(t,e,r){"use strict";r.r(e);var a=r(3),n=r.n(a),i=r(36),s=r.n(i),c=(r(107),r.p,r(108),r(6)),o=r(7),l=r(2),u=r(8),d=r(9),h=r(4),p=r.n(h),y=r(13),m=r(0),f=r(1),v=function(t){Object(u.a)(r,t);var e=Object(d.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).svgRef=n.a.createRef(),a.state={year:1800,country:"average"},a.cm_plots={},a.income_plots={},a.setyear=a.setyear.bind(Object(l.a)(a)),a.tick=a.tick.bind(Object(l.a)(a)),a.setCurrentYear=a.setCurrentYear.bind(Object(l.a)(a)),a.handleSelect=a.handleSelect.bind(Object(l.a)(a)),a.addannotation=a.addannotation.bind(Object(l.a)(a)),a}return Object(o.a)(r,[{key:"updatechart",value:function(){var t=this,e=500;"average"!=this.state.country&&null===this.timerID&&(e=1e3);var r=this.cm_plots[this.state.country].filter((function(e){return e.year<=t.state.year})).sort((function(t,e){return parseFloat(t.year)-parseFloat(e.year)})),a=this.income_plots[this.state.country].filter((function(e){return e.year<=t.state.year})).sort((function(t,e){return parseFloat(t.year)-parseFloat(e.year)})),n=m.g().domain([1800,2040]).range([0,700]),i=m.g().domain([0,e]).range([300,0]),s=m.h().domain([200,179e3]).range([300,0]);m.e().x((function(t){return n(t.year)})).y((function(t){return i(t.val)}));m.i("#scatter").html(""),m.i("#ttip").html("");var c=m.i("#ttip").append("div").attr("class","tooltip").style("opacity",0);this.addpath(r.filter((function(t){return t.year<=2021})),"steelblue",n,i,"translate(50,50)"),this.addpath(r.filter((function(t){return t.year>=2021})),"red",n,i,"translate(50,50)"),this.addannotation(r,n,i,"translate(50,50)",1),this.addtooltips(r,n,i,c,"translate(50,50)","Child mortality"),m.i("#scatter").append("g").attr("transform","translate(50,50)").call(m.b(i).tickFormat(m.d("~s"))),m.i("#scatter").append("text").attr("class","y label").attr("text-anchor","end").attr("x",-100).attr("y",4).attr("dy",".75em").attr("transform","rotate(-90)").attr("font-size",12).text("Child Mortality (per 1000)"),m.i("svg").append("g").attr("transform","translate(50,350)").call(m.a(n).tickFormat(m.d("d"))),m.i("#scatter").append("text").attr("class","x label").attr("text-anchor","end").attr("x",450).attr("y",385).attr("font-size",12).text("Year"),this.addpath(a.filter((function(t){return t.year<=2021})),"steelblue",n,s,"translate(50,450)"),this.addpath(a.filter((function(t){return t.year>=2021})),"red",n,s,"translate(50,450)"),this.addannotation(a,n,s,"translate(50,450)",2),this.addtooltips(a,n,s,c,"translate(50,450)","Income"),m.i("#scatter").append("g").attr("transform","translate(50,450)").call(m.b(s).tickValues([300,1e3,3e3,1e4,3e4,1e5]).tickFormat(m.d("~s"))),m.i("#scatter").append("text").attr("class","y label").attr("text-anchor","end").attr("x",-530).attr("y",4).attr("dy",".75em").attr("transform","rotate(-90)").attr("font-size",12).text("Income per capita ($)"),m.i("svg").append("g").attr("transform","translate(50,750)").call(m.a(n).tickFormat(m.d("d"))),m.i("#scatter").append("text").attr("class","x label").attr("text-anchor","end").attr("x",450).attr("y",785).attr("font-size",12).text("Year"),m.i("#scatter").append("circle").attr("cx",600).attr("cy",60).attr("r",4).style("fill","steelblue"),m.i("#scatter").append("circle").attr("cx",600).attr("cy",80).attr("r",4).style("fill","red"),m.i("#scatter").append("text").attr("x",620).attr("y",60).text("historical").style("font-size","12px").attr("alignment-baseline","middle"),m.i("#scatter").append("text").attr("x",620).attr("y",80).text("projected").style("font-size","12px").attr("alignment-baseline","middle"),m.i("#scatter").append("circle").attr("cx",600).attr("cy",460).attr("r",4).style("fill","steelblue"),m.i("#scatter").append("circle").attr("cx",600).attr("cy",480).attr("r",4).style("fill","red"),m.i("#scatter").append("text").attr("x",620).attr("y",460).text("historical").style("font-size","12px").attr("alignment-baseline","middle"),m.i("#scatter").append("text").attr("x",620).attr("y",480).text("projected").style("font-size","12px").attr("alignment-baseline","middle")}},{key:"addannotation",value:function(t,e,r,a,n){if(null===this.timerID&&this.state.year>1975){var i=e(1925),s=e(1975),c=t.filter((function(t){return 1925==parseInt(t.year)})),o=t.filter((function(t){return 1975==parseInt(t.year)}));if(0==c.length||0==o.length)return;var l=parseFloat(c[0].val),u=parseFloat(o[0].val),d=r(l),h=r(u);m.i("#scatter").append("g").attr("transform",a).append("rect").attr("x",i).attr("y",Math.min(d,h)).attr("width",s-i).attr("height",Math.abs(h-d)).attr("stroke","black").attr("fill-opacity",.2).attr("stroke-width","3").attr("stroke-dasharray","4");var p,y=i,f=Math.min(d,h)-60,v=(100*(u/l-1)).toFixed(2),x="",b="";if(1==n)v=-v,x="decrease",b="child mortality",(p=m.i("#scatter").append("g").attr("transform",a).append("text").attr("x",y).attr("y",f).attr("class","text-label").text("Percentage "+x+" in ")).append("tspan").text(b+" during ").attr("x",y).attr("y",f+20),p.append("tspan").text("1925 - 1975: "+v).attr("x",y).attr("y",f+40);if(2==n)x="increase",b="income",(p=m.i("#scatter").append("g").attr("transform",a).append("text").attr("x",y).attr("y",f+20).attr("class","text-label").text("...while percentage "+x)).append("tspan").text("in income: "+v).attr("x",y).attr("y",f+40)}}},{key:"addpath",value:function(t,e,r,a,n){m.i("#scatter").append("g").attr("transform",n).append("path").datum(t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("d",m.e().x((function(t){return r(t.year)})).y((function(t){return a(t.val)})))}},{key:"addtooltips",value:function(t,e,r,a,n,i){m.i("#scatter").append("g").attr("transform",n).selectAll("rect").data(t).enter().append("rect").attr("class","ttrect").attr("x",(function(t,r){return e(t.year)})).attr("y",(function(t,e){return 0})).attr("width",(function(t,e){return 1})).attr("height",(function(t,e){return 300})).attr("fill","black").attr("opacity",0).on("mouseover",(function(t,e){m.i(this).attr("opacity",1),a.transition().duration(200).style("opacity",1),a.html(e.year+"<br/>"+i+": "+e.val).style("left",t.pageX+"px").style("top",t.pageY-28+"px")})).on("mouseout",(function(t,e){m.i(this).attr("opacity",0),a.transition().duration(500).style("opacity",0)}))}},{key:"componentDidMount",value:function(){var t=Object(y.a)(p.a.mark((function t(){var e,r,a=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.c("/income-cm-narrative/income_processed.csv");case 2:return this.incomedata=t.sent,t.next=5,m.c("/income-cm-narrative/child_mortality_0_5_year_olds_dying_per_1000_born.csv");case 5:for(this.cm_data=t.sent,this.cm_plots={},this.cm_plots.average=[],this.income_plots={},this.income_plots.average=[],e=function(t){for(var e=a.incomedata.map((function(e){var r=a.cm_data.find((function(t){return t.country===e.country}));return void 0===r||isNaN(e[t])||isNaN(r[t])?null:{country:e.country,income:e[t],child_mortality:r[[t]]}})).filter((function(t){return t.child_mortality>0})),r=0;r<e.length;r++){var n=e[r];n.country in a.cm_plots||(a.cm_plots[n.country]=[],a.income_plots[n.country]=[]),a.cm_plots[n.country].push({year:t,val:n.child_mortality}),a.income_plots[n.country].push({year:t,val:n.income})}var i=function(t,e){return t+parseFloat(e)},s=e.map((function(t){return t.child_mortality})).reduce(i,0);a.cm_plots.average.push({year:t,val:(s/e.length).toFixed(2)});var c=e.map((function(t){return t.income})).reduce(i,0);a.income_plots.average.push({year:t,val:(c/e.length).toFixed(2)})},r=1800;r<2041;r++)e(r);this.updatechart(),this.timerID=setInterval((function(){return a.tick()}),25);case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("Unmounting"),clearInterval(this.timerID),this.timerID=null,m.i("#scatter").html(""),m.i("#ttip").html("")}},{key:"componentDidUpdate",value:function(){this.updatechart()}},{key:"tick",value:function(){if(this.state.year>=2040)return clearInterval(this.timerID),this.timerID=null,void this.setState((function(t,e){return{country:t.country,year:2040}}));this.setState((function(t,e){return{country:t.country,year:t.year+1}}))}},{key:"setyear",value:function(t){clearInterval(this.timerID),this.timerID=null,this.setState({country:this.state.country,year:t.target.value})}},{key:"setCurrentYear",value:function(){clearInterval(this.timerID),this.timerID=null,this.setState({country:this.state.country,year:2040})}},{key:"handleSelect",value:function(t){this.setState({country:t.target.value,year:this.state.year})}},{key:"render",value:function(){var t=this,e=Object.keys(this.cm_plots),r=e.filter((function(t){return"average"!=t})).sort();return e=["average"].concat(r),Object(f.jsxs)("div",{children:[Object(f.jsxs)("form",{children:[Object(f.jsx)("label",{for:"year",children:"Please select a year: "}),Object(f.jsx)("input",{type:"range",min:1800,max:2040,step:1,id:"year",value:this.state.year,onInput:this.setyear}),Object(f.jsx)("output",{name:"selected_year",id:"selected_year",children:Object(f.jsx)("b",{children:this.state.year})})]}),null===this.timerID&&Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsxs)("label",{children:[" ",Object(f.jsx)("b",{children:"Please select a Country: "})]}),Object(f.jsx)("select",{value:this.state.country,onChange:this.handleSelect,children:e.map((function(t){return Object(f.jsx)("option",{value:t,children:t})}))})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:this.setCurrentYear,children:"Display complete curve"}),Object(f.jsx)("button",{onClick:function(){return t.props.resetFunc(t.props.sceneno)},children:"Restart this scene"})]}),Object(f.jsx)("div",{id:"ttip"}),Object(f.jsx)("svg",{id:"scatter",width:800,height:800,ref:this.svgRef})]})}}]),r}(a.Component),x=function(t){Object(u.a)(r,t);var e=Object(d.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).svgRef=n.a.createRef(),a.state={year:1800},a.setyear=a.setyear.bind(Object(l.a)(a)),a.tick=a.tick.bind(Object(l.a)(a)),a.setCurrentYear=a.setCurrentYear.bind(Object(l.a)(a)),a}return Object(o.a)(r,[{key:"leastSquares",value:function(t,e){var r=function(t,e){return t+e},a=1*t.reduce(r)/t.length,n=1*e.reduce(r)/e.length,i=t.map((function(t){return Math.pow(t-a,2)})).reduce(r),s=e.map((function(t){return Math.pow(t-n,2)})).reduce(r),c=t.map((function(t,r){return(t-a)*(e[r]-n)})).reduce(r),o=c/i;return[o,n-a*o,Math.pow(c,2)/(i*s)]}},{key:"updatechart",value:function(){var t=this,e=this.incomedata.map((function(e){var r=t.cm_data.find((function(t){return t.country===e.country}));return void 0===r||isNaN(e[t.state.year])||isNaN(r[t.state.year])?null:{country:e.country,income:e[t.state.year],child_mortality:r[[t.state.year]]}})).filter((function(t){return t.child_mortality>0})),r=1e3,a=1.5,n="lightblue";null===this.timerID&&(2021==this.state.year&&(r=150),a=3),this.state.year>2021&&(n="red"),2021==this.state.year&&(n="orange");var i=m.h().domain([200,179e3]).range([0,700]),s=m.g().domain([0,r]).range([700,0]);m.i("#scatter").html(""),m.i("#ttip").html("");var c=m.i("#ttip").append("div").attr("class","tooltip").style("opacity",0);if(m.i("#scatter").append("g").attr("transform","translate(50,50)").selectAll("circle").data(e).enter().append("circle").attr("cx",(function(t,e){return i(t.income)})).attr("cy",(function(t,e){return s(t.child_mortality)})).attr("r",(function(t,e){return a})).attr("fill",n).on("mouseover",(function(t,e){c.transition().duration(200).style("opacity",1),c.html(e.country+"<br/>Income: $"+e.income+"<br/>Child mortality: "+e.child_mortality).style("left",t.pageX+"px").style("top",t.pageY-28+"px")})).on("mouseout",(function(t){c.transition().duration(500).style("opacity",0)})),m.i("#scatter").append("g").attr("transform","translate(50,50)").call(m.b(s).tickFormat(m.d("~s"))),m.i("#scatter").append("text").attr("class","y label").attr("text-anchor","end").attr("x",-200).attr("y",4).attr("dy",".75em").attr("transform","rotate(-90)").attr("font-size",14).text("Child Mortality: 0-5 year-olds dying per 1000 born"),m.i("#scatter").append("g").attr("transform","translate(50,750)").call(m.a(i).tickValues([300,1e3,3e3,1e4,3e4,1e5]).tickFormat(m.d("~s"))),m.i("#scatter").append("text").attr("class","x label").attr("text-anchor","end").attr("x",650).attr("y",785).attr("font-size",12).text("Income: GDP per capital, adjusted for inflation and PPP (in international dollars, fixed 2011 prices)"),null===this.timerID){var o=e.map((function(t){return parseFloat(s(t.child_mortality))})),l=e.map((function(t){return parseFloat(i(t.income))})),u=this.leastSquares(l,o),d=u[1],h=700,p=(h-u[1])/u[0];p>700&&(p=700,h=u[0]*p+u[1]);var y=[[0,d,p,h]];m.i("#scatter").append("g").attr("transform","translate(50,50)").selectAll(".trendline").data(y).enter().append("line").attr("class","trendline").attr("x1",(function(t){return t[0]})).attr("y1",(function(t){return t[1]})).attr("x2",(function(t){return t[2]})).attr("y2",(function(t){return t[3]})).attr("stroke","black").attr("stroke-dasharray","4").attr("stroke-width",1);var f=500,v=300,x=m.i("#scatter").append("g").attr("transform","translate(50,50)").append("text").attr("x",f).attr("y",v).attr("class","text-label").text("Negative slope of ");x.append("tspan").text("trend line indicates ").attr("x",f).attr("y",320),x.append("tspan").text("the correlation").attr("x",f).attr("y",340),x.append("tspan").text("between income and").attr("x",f).attr("y",360),x.append("tspan").text("child mortality").attr("x",f).attr("y",380),m.i("#scatter").append("g").attr("transform","translate(50,50)").append("defs").append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",5).attr("refY",0).attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("class","arrowHead");var b=p-100,j=u[0]*b+u[1];m.i("#scatter").append("g").attr("transform","translate(50,50)").append("line").attr("class","labelline").attr("x1",550).attr("y1",390).attr("x2",(function(t){return b})).attr("y2",(function(t){return j-5})).attr("stroke","black").attr("stroke-width",1).attr("marker-end","url(#arrow)")}}},{key:"componentDidMount",value:function(){var t=Object(y.a)(p.a.mark((function t(){var e=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.c("/income-cm-narrative/income_processed.csv");case 2:return this.incomedata=t.sent,t.next=5,m.c("/income-cm-narrative/child_mortality_0_5_year_olds_dying_per_1000_born.csv");case 5:this.cm_data=t.sent,this.updatechart(),this.timerID=setInterval((function(){return e.tick()}),25);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("Unmounting"),clearInterval(this.timerID),this.timerID=null,m.i("#scatter").html(""),m.i("#ttip").html("")}},{key:"componentDidUpdate",value:function(){this.updatechart()}},{key:"tick",value:function(){if(this.state.year>=2040)return clearInterval(this.timerID),this.timerID=null,void this.setState((function(t,e){return{year:2021}}));this.setState((function(t,e){return{year:t.year+1}}))}},{key:"setyear",value:function(t){clearInterval(this.timerID),this.timerID=null,this.setState({year:t.target.value})}},{key:"setCurrentYear",value:function(){clearInterval(this.timerID),this.timerID=null,this.setState({year:2021})}},{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("form",{children:[Object(f.jsx)("label",{for:"year",children:"Please select a year: "}),Object(f.jsx)("input",{type:"range",min:1800,max:2040,step:1,id:"year",value:this.state.year,onInput:this.setyear}),Object(f.jsx)("output",{name:"selected_year",id:"selected_year",children:Object(f.jsx)("b",{children:this.state.year})})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:this.setCurrentYear,children:"Show 2021 data"}),Object(f.jsx)("button",{onClick:function(){return t.props.resetFunc(t.props.sceneno)},children:"Restart this scene"})]}),Object(f.jsx)("div",{id:"ttip"}),Object(f.jsx)("svg",{id:"scatter",width:800,height:800,ref:this.svgRef})]})}}]),r}(a.Component),b=r(37),j=function(t){Object(u.a)(r,t);var e=Object(d.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).svgRef=n.a.createRef(),a.state={year:1800},a.setyear=a.setyear.bind(Object(l.a)(a)),a.tick=a.tick.bind(Object(l.a)(a)),a.setCurrentYear=a.setCurrentYear.bind(Object(l.a)(a)),a.addannotation=a.addannotation.bind(Object(l.a)(a)),a.max_year_reached={},a}return Object(o.a)(r,[{key:"addannotation",value:function(t,e,r,a,n,i,s,c,o){if(null===this.timerID&&2021==this.state.year){var l=m.i("#scatter").append("g").attr("transform","translate(50,50)").append("text").attr("x",t).attr("y",e).attr("class","text-label").text(r);l.append("tspan").text(a).attr("x",t).attr("y",e+20),l.append("tspan").text(n).attr("x",t).attr("y",e+40),m.i("#scatter").append("g").attr("transform","translate(50,50)").append("defs").append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",5).attr("refY",0).attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("class","arrowHead"),m.i("#scatter").append("g").attr("transform","translate(50,50)").append("line").attr("class","labelline").attr("x1",i).attr("y1",s).attr("x2",c).attr("y2",o).attr("stroke","black").attr("stroke-width",1).attr("marker-end","url(#arrow)")}}},{key:"updatechart",value:function(){var t=this,e=500,r="lightblue";this.state.year>2021&&(r="red"),2021==this.state.year&&(r="orange"),2021==this.state.year&&null===this.timerID&&(e=130);for(var a=this.incomedata.map((function(e){var r=t.cm_data.find((function(t){return t.country===e.country}));return void 0===r||isNaN(e[t.state.year])||isNaN(r[t.state.year])?null:{country:e.country,income:e[t.state.year],child_mortality:r[[t.state.year]]}})).filter((function(t){return t.child_mortality>0})),n=a.sort((function(t,e){return parseFloat(t.income)-parseFloat(e.income)})).length,i=Math.floor(n/10),s={},c=0;c<10;c++)s[c]=[];for(var o=0;o<n;o++){var l=Math.floor(o/i);s[l=Math.min(l,9)].push(a[o])}for(var u=[],d=function(t,e){return t+parseFloat(e)},h=0;h<10;h++){var p=s[h],y=p.length,f=p.map((function(t){return t.child_mortality})).reduce(d,0),v=p.map((function(t){return t.income})).reduce(d,0),x=(f/y).toFixed(2);u.push({cm_avg:x,income_avg:(v/y).toFixed(2)}),x<100&&(h in this.max_year_reached?this.max_year_reached[h]=Math.min(this.max_year_reached[h],this.state.year):this.max_year_reached[h]=this.state.year)}var j=m.f().domain(Object(b.a)(Array(10).keys()).map((function(t){return t+1}))).range([0,700]).paddingInner(.2).paddingOuter(.2),g=m.g().domain([0,e]).range([700,0]);m.h().domain([200,179e3]).range([300,0]);m.i("#scatter").html(""),this.addannotation(20,200,"Average child mortality of","group 1 countries dropped below 100","for the first time in 2011",100,250,40,320),this.addannotation(300,500,"For group 5, average below 100","was reached in 1982","",370,530,320,570),this.addannotation(550,600,"And for group 10, 1949","","",620,610,650,660),m.i("#ttip").html("");var k=m.i("#ttip").append("div").attr("class","tooltip").style("opacity",0);m.i("#scatter").append("g").attr("transform","translate(50,50)").selectAll("rect").data(u).enter().append("rect").attr("x",(function(t,e){return j(e+1)})).attr("y",(function(t,e){return g(t.cm_avg)})).attr("width",(function(t,e){return j.bandwidth()})).attr("height",(function(t,e){return 700-g(t.cm_avg)})).attr("fill",r).on("mouseover",(function(t,e){k.transition().duration(200).style("opacity",1),k.html("Average Income: $"+e.income_avg+"<br/>Average Child Mortality: "+e.cm_avg).style("left",t.pageX+"px").style("top",t.pageY-28+"px")})).on("mouseout",(function(t){k.transition().duration(500).style("opacity",0)})),m.i("#scatter").append("g").attr("transform","translate(50,50)").call(m.b(g).tickFormat(m.d("~s"))),m.i("#scatter").append("text").attr("class","y label").attr("text-anchor","end").attr("x",-300).attr("y",4).attr("dy",".75em").attr("transform","rotate(-90)").attr("font-size",14).text("Average Child Mortality rate"),m.i("svg").append("g").attr("transform","translate(50,750)").call(m.a(j)),m.i("#scatter").append("text").attr("class","x label").attr("text-anchor","end").attr("x",550).attr("y",785).attr("font-size",12).text("Group number (grouped by average income ranks: 1(lowest) to 10(highest))")}},{key:"componentDidMount",value:function(){var t=Object(y.a)(p.a.mark((function t(){var e=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("chart mounted"),t.next=3,m.c("/income-cm-narrative/income_processed.csv");case 3:return this.incomedata=t.sent,t.next=6,m.c("/income-cm-narrative/child_mortality_0_5_year_olds_dying_per_1000_born.csv");case 6:this.cm_data=t.sent,this.updatechart(),this.timerID=setInterval((function(){return e.tick()}),25);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("Unmounting"),clearInterval(this.timerID),this.timerID=null,m.i("#scatter").html(""),m.i("#ttip").html("")}},{key:"componentDidUpdate",value:function(){this.updatechart()}},{key:"tick",value:function(){if(this.state.year>=2040)return console.log(this.max_year_reached),clearInterval(this.timerID),this.timerID=null,void this.setState((function(t,e){return{year:2021}}));this.setState((function(t,e){return{year:t.year+1}}))}},{key:"setyear",value:function(t){clearInterval(this.timerID),this.timerID=null,this.setState({year:t.target.value})}},{key:"setCurrentYear",value:function(){clearInterval(this.timerID),this.timerID=null,this.setState({year:2021})}},{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("form",{children:[Object(f.jsx)("label",{for:"year",children:"Please select a year: "}),Object(f.jsx)("input",{type:"range",min:1800,max:2040,step:1,id:"year",value:this.state.year,onInput:this.setyear}),Object(f.jsx)("output",{name:"selected_year",id:"selected_year",children:Object(f.jsx)("b",{children:this.state.year})})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:this.setCurrentYear,children:"Show annotated 2021 data"}),Object(f.jsx)("button",{onClick:function(){return t.props.resetFunc(t.props.sceneno)},children:"Restart this scene"})]}),Object(f.jsx)("div",{id:"ttip"}),Object(f.jsx)("svg",{id:"scatter",width:800,height:800,ref:this.svgRef})]})}}]),r}(a.Component),g=function(t){Object(u.a)(r,t);var e=Object(d.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).svgRef=n.a.createRef(),a.state={scene:0,prevscene:0},a.nextscene=a.nextscene.bind(Object(l.a)(a)),a.resetscene=a.resetscene.bind(Object(l.a)(a)),a}return Object(o.a)(r,[{key:"nextscene",value:function(){this.setState({scene:(this.state.scene+1)%3,prevscene:(this.state.scene+1)%3})}},{key:"setscene",value:function(t){this.setState({scene:t,prevscene:t})}},{key:"resetscene",value:function(t){console.log("resetting"),console.log(t),this.setState({scene:-1,prevscene:t})}},{key:"componentDidUpdate",value:function(){-1==this.state.scene&&this.setState({scene:this.state.prevscene,prevscene:this.state.prevscene})}},{key:"render",value:function(){var t=this;return 0==this.state.scene?Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return t.setscene(0)},children:"Previous"}),Object(f.jsx)("button",{onClick:function(){return t.resetscene(0)},children:"Scene 1"}),Object(f.jsx)("button",{onClick:function(){return t.setscene(1)},children:"Scene 2"}),Object(f.jsx)("button",{onClick:function(){return t.setscene(2)},children:"Scene 3"}),Object(f.jsx)("button",{onClick:function(){return t.setscene(1)},children:"Next"}),Object(f.jsx)("h2",{children:"Scene 1: Child mortality vs Income of Countries (Through the years)"}),Object(f.jsx)(x,{resetFunc:this.resetscene,sceneno:this.state.scene}),Object(f.jsx)("p",{children:"Source: Free data from gapminder.org, CC-BY LICENSE"})]}):1==this.state.scene?Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return t.setscene(0)},children:"Previous"}),Object(f.jsx)("button",{onClick:function(){return t.setscene(0)},children:"Scene 1"}),Object(f.jsx)("button",{onClick:function(){return t.resetscene(1)},children:"Scene 2"}),Object(f.jsx)("button",{onClick:function(){return t.setscene(2)},children:"Scene 3"}),Object(f.jsx)("button",{onClick:function(){return t.setscene(2)},children:"Next"}),Object(f.jsx)("h2",{children:"Scene 2: Average Child Mortality (up) and Average Income (down) per year"}),Object(f.jsx)(v,{resetFunc:this.resetscene,sceneno:this.state.scene}),Object(f.jsx)("p",{children:"Source: Free data from gapminder.org, CC-BY LICENSE"})]}):2==this.state.scene?Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return t.setscene(1)},children:"Previous"}),Object(f.jsx)("button",{onClick:function(){return t.setscene(0)},children:"Scene 1"}),Object(f.jsx)("button",{onClick:function(){return t.setscene(1)},children:"Scene 2"}),Object(f.jsx)("button",{onClick:function(){return t.resetscene(2)},children:"Scene 3"}),Object(f.jsx)("button",{onClick:function(){return t.setscene(2)},children:"Next"}),Object(f.jsx)("h2",{children:"Scene 3: Distribution of average child mortality across country deciles by income (Through the years)"}),Object(f.jsx)(j,{resetFunc:this.resetscene,sceneno:this.state.scene}),Object(f.jsx)("p",{children:"Source: Free data from gapminder.org, CC-BY LICENSE"})]}):null}}]),r}(a.Component);var k=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(g,{})})},O=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,112)).then((function(e){var r=e.getCLS,a=e.getFID,n=e.getFCP,i=e.getLCP,s=e.getTTFB;r(t),a(t),n(t),i(t),s(t)}))};s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(k,{})}),document.getElementById("root")),O()}},[[111,1,2]]]);
//# sourceMappingURL=main.7a9a6930.chunk.js.map